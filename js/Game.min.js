var myCanvas=document.getElementById("canvas1");if(myCanvas.getContext){var ctx=myCanvas.getContext("2d")}(function(){var a=window.Game=function(c,b){this.myCanvas=c;this.ctx=b;var d=this;this.txtArr=["弹幕发射!biubiu 颤抖吧！小鸟","6666 感觉很好玩的样子 _(:_」∠)_ ","路过~~~~~~~卢本伟牛逼","这里是高德伟的直播间吗？！！！！！！"];this.speed=0;this.score=0;this.imgS={};this.fno=0;this.pipeArr=[];this.init();this.imgsLoad(function(){d.start()})};a.prototype.init=function(){console.log("游戏初始化");var b=document.documentElement.clientWidth;var c=document.documentElement.clientHeight;if(b>414){b=414}else{if(b<320){b=320}}if(c>=736){c=736}else{if(c<500){c=500}}myCanvas.width=b;myCanvas.height=c;this.txtfno=myCanvas.width};a.prototype.imgsLoad=function(f){var d=this;this.imgArr=[{name:"bg_day",src:"images/res/bg_day.png"},{name:"bg_night",src:"images/res/bg_night.png"},{name:"bird0_0",src:"images/res/bird0_0.png"},{name:"bird0_1",src:"images/res/bird0_1.png"},{name:"bird0_2",src:"images/res/bird0_2.png"},{name:"bird1_0",src:"images/res/bird1_0.png"},{name:"bird1_1",src:"images/res/bird1_1.png"},{name:"bird1_2",src:"images/res/bird1_2.png"},{name:"bird2_0",src:"images/res/bird2_0.png"},{name:"bird2_1",src:"images/res/bird2_1.png"},{name:"bird2_2",src:"images/res/bird2_2.png"},{name:"pipe_down",src:"images/res/pipe_down.png"},{name:"pipe_up",src:"images/res/pipe_up.png"},{name:"land",src:"images/res/land.png"},{name:"score0",src:"images/res/font_048.png"},{name:"score1",src:"images/res/font_049.png"},{name:"score2",src:"images/res/font_050.png"},{name:"score3",src:"images/res/font_051.png"},{name:"score4",src:"images/res/font_052.png"},{name:"score5",src:"images/res/font_053.png"},{name:"score6",src:"images/res/font_054.png"},{name:"score7",src:"images/res/font_055.png"},{name:"score8",src:"images/res/font_056.png"},{name:"score9",src:"images/res/font_057.png"},{name:"logo",src:"images/res/title.png"},{name:"button_play",src:"images/res/button_play.png"},{name:"tutorial",src:"images/res/tutorial.png"},{name:"game_over",src:"images/res/text_game_over.png"}];var c=0;for(var b=0;b<this.imgArr.length;b++){var e=this.imgArr[b].name;this.imgS[e]=new Image();this.imgS[e].src=this.imgArr[b].src;this.imgS[e].onload=function(){c++;d.ctx.clearRect(0,0,myCanvas.width,myCanvas.height);var g="资源载入中"+c+"/"+d.imgArr.length;d.ctx.font="oblique small-caps bold 30px Arial";d.ctx.fillText(g,100,250);if(c==d.imgArr.length){console.log("图片加载完毕");f()}}}};a.prototype.start=function(){console.log("游戏开始");console.log(this.imgS);var b=this;this.SM=new SceneManager();this.timer=setInterval(function(){b.fno++;b.ctx.clearRect(0,0,1000,1000);b.SM.update();b.SM.render();b.ctx.font="16px consolas";b.ctx.fillStyle="black";b.ctx.fillText("当前速度"+b.land.speed,300,18);b.ctx.beginPath();b.ctx.fillText("帧信息FNO:"+b.fno,0,18)},20)};a.prototype.bindEvent=function(){myCanvas.onclick=function(){game.bird.fly()};myCanvas.ontouchstart=function(){game.bird.fly()}};a.prototype.scoreGet=function(){var c=game.score.toString();for(let i=0;i<c.length;i++){game.ctx.save();var b=c.charAt(i);game.ctx.drawImage(game.imgS["score"+b],myCanvas.width/2-c.length/2*34+34*i+5,30,24,44);game.ctx.restore()}}})();if(myCanvas.getContext){var game=new Game(document.getElementById("canvas1"),this.myCanvas.getContext("2d"))};