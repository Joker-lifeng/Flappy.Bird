(function(){var a=window.SceneManager=function(){this.sceneNum=1;this.logo=game.imgS.logo;this.button_play=game.imgS.button_play;this.button_play_Y=myCanvas.height;this.button_play_X=myCanvas.width/2-this.button_play.width/2;this.logoY=-41;this.tutorial=game.imgS.tutorial;this.tX=myCanvas.width/2-this.tutorial.width/2;this.tY=300;this.opacityNumb=1;this.isOpacity=false;console.log(this.tX,this.tY);game.bird=new Bird();game.land=new Land();game.backgroun=new Background();this.bindEvent()};a.prototype.update=function(){switch(this.sceneNum){case 1:this.logoY+=2;this.button_play_Y-=9;if(this.logoY>myCanvas.height/2-50){this.logoY=myCanvas.height/2-50}if(this.button_play_Y<myCanvas.height/2+50){this.button_play_Y=myCanvas.height/2+50}break;case 2:if(!this.isOpacity){this.opacityNumb-=0.02}if(this.isOpacity){this.opacityNumb+=0.02}if(this.opacityNumb<0.02){this.isOpacity=true}if(this.opacityNumb>0.98){this.isOpacity=false}break;case 3:game.backgroun.update();game.land.update();game.bird.update();game.txtfno-=0.5;if(game.fno%80==0){new Pipe()}break;case 4:this.birdFno++;if(!this.birdLand){game.bird.y+=this.birdFno}else{}if(game.bird.y>=myCanvas.height*0.78-15){game.bird.y=myCanvas.height*0.78-15;this.birdLand=true}game.ctx.globalAlpha=this.opacityNumb;this.opacityNumb+=0.2;if(this.opacityNumb>0.98){this.opacityNumb=1}if(this.birdFno>60){this.enter(5)}}};a.prototype.render=function(){switch(this.sceneNum){case 1:game.backgroun.render();game.land.render();game.bird.render();game.ctx.drawImage(this.logo,myCanvas.width/2-this.logo.width/2,this.logoY,this.logo.width,this.logo.height);game.ctx.drawImage(this.button_play,this.button_play_X,this.button_play_Y,this.button_play.width,this.button_play.height);game.bird.x=myCanvas.width/2;game.bird.y=myCanvas.height-myCanvas.height*0.65;break;case 2:game.backgroun.render();game.land.render();game.bird.render();game.bird.wings();game.ctx.save();game.ctx.globalAlpha=this.opacityNumb;game.ctx.drawImage(this.tutorial,this.tX,this.tY,this.tutorial.width,this.tutorial.height);game.ctx.restore();break;case 3:game.backgroun.render();game.land.render();for(let i=0;i<game.pipeArr.length;i++){game.pipeArr[i]&&game.pipeArr[i].update();game.pipeArr[i]&&game.pipeArr[i].render()}this.textenter();game.scoreGet();game.bird.render();game.bird.wings();break;case 4:game.backgroun.render();game.land.render();for(let i=0;i<game.pipeArr.length;i++){game.pipeArr[i]&&game.pipeArr[i].render()}game.scoreGet();game.bird.render();break;case 5:game.backgroun.render();game.land.render();game.scoreGet();game.ctx.drawImage(game.imgS.game_over,myCanvas.width/2-205/2+12,200,205,54);break}};a.prototype.enter=function(b){this.sceneNum=b;switch(this.sceneNum){case 1:game.score=0;break;case 2:this.opacityNumb=1;this.text0=game.txtArr[getRandom(0,3)];this.text1=game.txtArr[getRandom(0,3)];this.text2=game.txtArr[getRandom(0,3)];this.text3=game.txtArr[getRandom(0,3)];break;case 3:game.fno=0;game.bird.fno=0;game.txtfno=myCanvas.width;game.bird.birdSpeed=0;this.birdFno=0;this.birdLand=false;break;case 4:this.opacityNumb=0;break}};a.prototype.bindEvent=function(){var b=this;myCanvas.onclick=function(c){b.Eventhandler(c.clientX,c.clientY)};myCanvas.addEventListener("touchstart",function(d){var c=d.touches[0];b.Eventhandler(c.clientX,c.clientY)})};a.prototype.Eventhandler=function(c,b){var d=this;switch(d.sceneNum){case 1:var f=f||window.event;var c=c-myCanvas.offsetLeft;var b=b-myCanvas.offsetTop;if(c>d.button_play_X&&c<d.button_play_X+d.button_play.width-10&&b>d.button_play_Y&&b<d.button_play_Y+55){d.enter(2)}break;case 2:d.enter(3);game.pipeArr=[];break;case 3:game.bird.fly();break;case 5:this.enter(1);break}};a.prototype.textenter=function(){if(game.fno>100){game.ctx.save();game.ctx.fillStyle=bg3();game.ctx.fillText(this.text0,game.txtfno,90);game.ctx.restore()}if(game.fno>300){game.ctx.save();game.ctx.fillStyle=bg3();game.ctx.fillText(this.text1,game.txtfno+150,155);game.ctx.restore()}if(game.fno>700){game.ctx.save();game.ctx.fillStyle="purple";game.ctx.fillText(this.text2,game.txtfno+400,myCanvas.height*0.78+50);game.ctx.restore()}if(game.fno>1000){game.ctx.save();game.ctx.fillStyle="darkred";game.ctx.fillText(this.text3,game.txtfno+570,290);game.ctx.restore()}}})();